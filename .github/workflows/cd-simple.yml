name: CD-Simple

on:
  push:
    branches: [Firman]
    paths:
      - "Model/**"
      - "Results/**"
      - "report.md"
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: install
        run: make install
      - name: deploy
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}
          USER_NAME: ${{ secrets.USER_NAME }}
          USER_EMAIL: ${{ secrets.USER_EMAIL }}
        run: |
          echo "Starting deployment..."
          if [ -n "$HF_TOKEN" ]; then
            echo "Token exists: YES"
          else
            echo "Token exists: NO"
          fi
          make deploy HF_TOKEN="$HF_TOKEN" \
            USER_NAME="$USER_NAME" USER_EMAIL="$USER_EMAIL"
